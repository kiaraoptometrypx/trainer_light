<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fan Chart with Fogging & CYL Blur (Side Buttons with Header)</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    font-family: Arial;
    font-size:15px;
    height: 100vh;
    justify-content: center;
    background: lightgrey;
  }

  #header {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-bottom: 10px;
  }

  #container {
    display: flex;
    align-items: center;
  }

  #left-controls, #right-controls {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  #right-controls { margin-left: 20px; }
  #left-controls { margin-right: 20px; }

  #cylVal { font-weight:bold; margin-left:5px; }

canvas {
  background: lightgrey;
  border-radius: 50%;
  width: 100%;
  aspect-ratio: 1 / 1;
padding:20px;
}



button  {
border:2px solid grey;
font-size:15px;
padding:2px;
height:50px;
width:100px;
border-radius:10px;
margin-top:5px;
margin-bottom:5px;
}

.smallbtn {
border:2px solid grey;
font-size:15px;
padding:2px;
height:25px;
width:100px;
border-radius:10px;
margin-top:5px;
margin-bottom:5px;
}

</style>
</head>
<body>

<!-- Header with Fog and Current CYL -->
<div id="header">
    Current CYL: <span style="color:#404040" id="cylVal">0.00</span>
</div>

<div id="header">
    All lines 
    <button class="smallbtn" id="fogBtn" onclick="toggleFogging()">Lighter</button>
  </div>


<div id="container">
  <!-- Left side buttons -->
  <div id="left-controls">
    <div>
      Line<br>
      <button onclick="changeCyl(-0.25)"> Lighter </button>
    </div>
    <div>
      Rotate<br>
      <button onclick="rotateFan(-90)"> <<< </button><br>
      <button onclick="rotateFan(-45)"> << </button><br>
      <button onclick="rotateFan(-15)"> < </button>

    </div>
  </div>

  <!-- Canvas -->
  <canvas style="margin-top:20px" id="fan-container" width="400" height="400"></canvas>

  <!-- Right side buttons -->
  <div id="right-controls">
    <div>
      Line<br>
      <button onclick="changeCyl(0.25)"> Darker </button>
    </div>
    <div>
      Rotate<br>
      <button onclick="rotateFan(90)"> >>> </button><br>
      <button onclick="rotateFan(45)"> >> </button><br>
      <button onclick="rotateFan(15)"> > </button>
    </div>
  </div>

</div>

<div style="height:40px"> </div>
<span>Tell us how you see.<br> Adjust the rotation and line darkness to match the pattern.</span>






<script>
const canvas = document.getElementById('fan-container');
const ctx = canvas.getContext('2d');

let cylBlur = 0.00;
let fogOn = true;
let fogStrength = 0.50;
let angle = 0;

const cylVal = document.getElementById('cylVal');
const fogBtn = document.getElementById('fogBtn');

function updateCylDisplay() {
  let axis = (90 + angle) % 180;
  if (axis === 0) axis = 180; // replace 0 with 180
  let axisStr = axis.toString().padStart(3, '0'); // always 3 digits
  cylVal.textContent = `${cylBlur.toFixed(2)} √ó ${axisStr}`;
}



updateCylDisplay();

// Toggle fog
function toggleFogging() {
  fogOn = !fogOn;
  fogBtn.textContent = fogOn ? 'Lighter' : 'Darker';
  drawFan();
}

// Change CYL blur
function changeCyl(delta) {
  cylBlur = Math.max(0, +(cylBlur + delta).toFixed(2));
  updateCylDisplay();
  drawFan();
}

// Rotate fan
function rotateFan(delta) {
  angle = (angle + delta + 360) % 360;
  updateCylDisplay();
  drawFan();
}

// Draw fan
function drawFan() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Center circle
  ctx.beginPath();
  ctx.arc(200,200,160,0,Math.PI*2);
  ctx.fillStyle = 'white';
  ctx.fill();

  ctx.save();
  ctx.translate(200,200);
  ctx.rotate(angle * Math.PI / 180);

  const angles = [0,15,30,45,60,75,90,105,120,135,150,165];

  angles.forEach(a => {
    const dist = Math.min(Math.abs(a), Math.abs(a-180));
const rawBlur = dist / 30 * cylBlur + (fogOn ? fogStrength : 0);
const totalBlur = Math.min(rawBlur, 6.0); // ‚Üê MAX BLUR CAP
    const layers = Math.max(1, Math.round(totalBlur * 3));

    for(let i=0; i<layers; i++){
      const offset = (i - layers/2) * 1; // ‚Üê THIS CONTROLS PIXEL SPREAD
      ctx.save();
      ctx.rotate(a * Math.PI / 180);
      ctx.lineWidth = 4;
      ctx.strokeStyle = `rgba(64,64,64,${1/layers})`;
      ctx.beginPath();
      ctx.moveTo(offset, -130);
      ctx.lineTo(offset, 130);
      ctx.stroke();
      ctx.restore();
    }
  });

  /* üî¥ RED DOT ‚Äî DARKEST AXIS (180¬∞) */
  ctx.save();
  ctx.rotate(180 * Math.PI / 180);
  ctx.beginPath();
  ctx.arc(0, -145, 5, 0, Math.PI * 2);
  ctx.fillStyle = 'darkred';
  ctx.fill();
  ctx.restore();

  ctx.restore();

  // Center circle
  ctx.beginPath();
  ctx.arc(200,200,50,0,Math.PI*2);
  ctx.fillStyle = 'white';
  ctx.fill();

// Clock numbers with color and spacing
ctx.fillStyle = '#404040'; // ‚Üê change to any color you like (e.g., 'red', '#ff0000')
ctx.font = '600 20px Arial';    // ‚Üê change text size

ctx.textAlign = 'center';
ctx.textBaseline = 'middle';

const numberRadius = 190; // ‚Üê adjust spacing from center (larger = further out)

for(let i = 1; i <= 12; i++){
  let angleRad = (i * 30 - 90) * Math.PI / 180; // -90 starts at top
  let x = 200 + Math.cos(angleRad) * numberRadius;
  let y = 200 + Math.sin(angleRad) * numberRadius;
  ctx.fillText(i.toString(), x, y);
}



}

// Initial draw
drawFan();
</script>












</body>
</html>
